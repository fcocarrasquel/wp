!function(i){i(function(){var e,a;i("#upload_image_button").on("click",function(t){t.preventDefault(),e||(e=wp.media.frames.file_frame=wp.media({title:i(this).data("uploader_title"),button:{text:i(this).data("uploader_button_text")},multiple:!1})).on("select",function(){attachment=e.state().get("selection").first().toJSON();var t=i("#upload_image_input img");i("#image_url").val(attachment.url),i("#attach_id").val(attachment.id),i("#upload_image_remove_button").fadeIn(),t.attr("src",attachment.url),t.attr("srcset",attachment.url)}),e.open()}),i("#upload_image_remove_button").on("click",function(t){i("#upload_image_input img").attr("src","").replaceWith(yith_wcfm_media.wc_placeholder_img),i("#upload_image_remove_button").fadeOut(),i("#attach_id").val(""),i("#image_url").val(""),t.preventDefault()}),i("#add_product_gallery_image").on("click",function(t){t.preventDefault(),a||(a=wp.media.frames.file_frame=wp.media({title:i(this).data("uploader_title"),button:{text:i(this).data("uploader_button_text")},multiple:!0})).on("select",function(){image_ids=a.state().get("selection"),image_ids.map(function(t){var e='<span class="image"><span class="dashicons dashicons-dismiss remove_image"></span><img width="150" height="150" src="'+(t=t.toJSON()).url+'" class="attachment-thumbnail size-thumbnail"></span>',a=i("#product_gallery");e+='<input type="hidden" name="product_gallery[]" value="'+t.id+'" />',a.append(e);a=a.find(".woocommerce-placeholder");void 0!==a&&a.remove()})}),a.open()}),i("body").on("click",".remove_image",function(){var t=i("#product_gallery");t.find("span.image").length-1==0&&t.append(yith_wcfm_media.wc_placeholder_img),i(this).parent(".image").remove()})})}(jQuery);